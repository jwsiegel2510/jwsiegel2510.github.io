<html>

<title>
Jon's Sudoku Solver
</title>

<body BGCOLOR=#F8F8F8 TEXT=BLACK LINK=BLUE>
<H1> <center> Jonathan's Sudoku Solver </center> </H1>

<!--<canvas id="myCanvas"></canvas>-->
<center>
<form>
<p style = "margin-top:0em; margin-bottom:.25em"><input id = "11" type = "number" size="1" style=width:40px  value = 0><input id="12" type = "number" size="1" style=width:40px value = 0><input id="13" type = "number" size="1" style=width:40px value = 0>
<input id = "14" type = "number" size="1" style=width:40px value = 0><input id="15" type = "number" size="1" style=width:40px value = 0><input id="16" type = "number" size="1" style=width:40px value = 0>
<input id = "17" type = "number" size="1" style=width:40px value = 0><input id="18" type = "number" size="1" style=width:40px value = 0><input id="19" type = "number" size="1" style=width:40px value = 0><br>
<input id = "21" type = "number" size="1" style=width:40px value = 0><input id="22" type = "number" size="1" style=width:40px value = 0><input id="23" type = "number" size="1" style=width:40px value = 0>
<input id = "24" type = "number" size="1" style=width:40px value = 0><input id="25" type = "number" size="1" style=width:40px value = 0><input id="26" type = "number" size="1" style=width:40px value = 0>
<input id = "27" type = "number" size="1" style=width:40px value = 0><input id="28" type = "number" size="1" style=width:40px value = 0><input id="29" type = "number" size="1" style=width:40px value = 0><br>
<input id = "31" type = "number" size="1" style=width:40px value = 0><input id="32" type = "number" size="1" style=width:40px value = 0><input id="33" type = "number" size="1" style=width:40px value = 0>
<input id = "34" type = "number" size="1" style=width:40px value = 0><input id="35" type = "number" size="1" style=width:40px value = 0><input id="36" type = "number" size="1" style=width:40px value = 0>
<input id = "37" type = "number" size="1" style=width:40px value = 0><input id="38" type = "number" size="1" style=width:40px value = 0><input id="39" type = "number" size="1" style=width:40px value = 0></p>
<p style = "margin-top:0em; margin-bottom:.25em"><input id = "41" type = "number" size="1" style=width:40px value = 0><input id="42" type = "number" size="1" style=width:40px value = 0><input id="43" type = "number" size="1" style=width:40px value = 0>
<input id = "44" type = "number" size="1" style=width:40px value = 0><input id="45" type = "number" size="1" style=width:40px value = 0><input id="46" type = "number" size="1" style=width:40px value = 0>
<input id = "47" type = "number" size="1" style=width:40px value = 0><input id="48" type = "number" size="1" style=width:40px value = 0><input id="49" type = "number" size="1" style=width:40px value = 0><br>
<input id = "51" type = "number" size="1" style=width:40px value = 0><input id="52" type = "number" size="1" style=width:40px value = 0><input id="53" type = "number" size="1" style=width:40px value = 0>
<input id = "54" type = "number" size="1" style=width:40px value = 0><input id="55" type = "number" size="1" style=width:40px value = 0><input id="56" type = "number" size="1" style=width:40px value = 0>
<input id = "57" type = "number" size="1" style=width:40px value = 0><input id="58" type = "number" size="1" style=width:40px value = 0><input id="59" type = "number" size="1" style=width:40px value = 0><br>
<input id = "61" type = "number" size="1" style=width:40px value = 0><input id="62" type = "number" size="1" style=width:40px value = 0><input id="63" type = "number" size="1" style=width:40px value = 0>
<input id = "64" type = "number" size="1" style=width:40px value = 0><input id="65" type = "number" size="1" style=width:40px value = 0><input id="66" type = "number" size="1" style=width:40px value = 0>
<input id = "67" type = "number" size="1" style=width:40px value = 0><input id="68" type = "number" size="1" style=width:40px value = 0><input id="69" type = "number" size="1" style=width:40px value = 0></p>
<p style = "margin-top:0em; margin-bottom:.25em"><input id = "71" type = "number" size="1" style=width:40px value = 0><input id="72" type = "number" size="1" style=width:40px value = 0><input id="73" type = "number" size="1" style=width:40px value = 0>
<input id = "74" type = "number" size="1" style=width:40px value = 0><input id="75" type = "number" size="1" style=width:40px value = 0><input id="76" type = "number" size="1" style=width:40px value = 0>
<input id = "77" type = "number" size="1" style=width:40px value = 0><input id="78" type = "number" size="1" style=width:40px value = 0><input id="79" type = "number" size="1" style=width:40px value = 0><br>
<input id = "81" type = "number" size="1" style=width:40px value = 0><input id="82" type = "number" size="1" style=width:40px value = 0><input id="83" type = "number" size="1" style=width:40px value = 0>
<input id = "84" type = "number" size="1" style=width:40px value = 0><input id="85" type = "number" size="1" style=width:40px value = 0><input id="86" type = "number" size="1" style=width:40px value = 0>
<input id = "87" type = "number" size="1" style=width:40px value = 0><input id="88" type = "number" size="1" style=width:40px value = 0><input id="89" type = "number" size="1" style=width:40px value = 0><br>
<input id = "91" type = "number" size="1" style=width:40px value = 0><input id="92" type = "number" size="1" style=width:40px value = 0><input id="93" type = "number" size="1" style=width:40px value = 0>
<input id = "94" type = "number" size="1" style=width:40px value = 0><input id="95" type = "number" size="1" style=width:40px value = 0><input id="96" type = "number" size="1" style=width:40px value = 0>
<input id = "97" type = "number" size="1" style=width:40px value = 0><input id="98" type = "number" size="1" style=width:40px value = 0><input id="99" type = "number" size="1" style=width:40px value = 0></p>
</form></center>

<script>
function guessFromInput(x) //creates an array of possibilities from the input
{
this.solvable = true;
this.index = -1;
this.poss = new Array();
var y = new Array();
var i = 0;
var j = 0;
for (i=0;i<81;i++)
{
if (x[i] == 0)
{
this.index = i;
for (j=0;j<9;j++)
{
y[j] = 1;
}
this.poss[i] = new Array();
for (j=0;j<9;j++)
{
this.poss[i][j] = y[j];
}
}
if (x[i] >= 1)
{
for (j=0;j<9;j++)
{
if (j == (x[i]-1))
{
y[j] = 1;
}
else {y[j] = 0;}
}
this.poss[i] = new Array();
for (j=0;j<9;j++)
{
this.poss[i][j] = y[j];
}
}
}

this.reduce = function() //performs as many direct deductions as possible.
{
var i = 0;
var j = 0;
var k = 0;
var l = 0;
var a = 0;
var b = 0;
var c = 0;
var d = 0;
var t = true;
while (t)
{
this.index = -1;
t = false;
for (i=0;i<81;i++)
{
k=-2;
for (j=0;j<9;j++)
{
if (k == -2 && this.poss[i][j] == 1)
{
k = j;
} else if (this.poss[i][j] == 1)
{
k = -1;
this.index = i;
}
}
if (k == -2)
{
this.solvable = false;
}
if (k >= 0)
{
for (j=0;j<81;j++)
{
a = j%9;
b = i%9;
c = (j-j%9)/9;
d = (i-i%9)/9;
if (a == b || c == d || ((a-a%3)/3 == (b-b%3)/3 && (c-c%3)/3 == (d-d%3)/3))
{
if (this.poss[j][k] == 1 && j != i)
{
this.poss[j][k] = 0;
t = true;
}
}
}
}
}
}
}
}


function guessFromGuess(x,y) //creates an array of possibilities from a previous array and a guess at a certain field.
{
this.solvable = true;
this.index = -1;
this.poss = new Array();
var i=0;
var j=0;
for (i=0;i<81;i++)
{
this.poss[i] = new Array();
for (j=0;j<9;j++)
{
this.poss[i][j] = x.poss[i][j];
}
}
for (j=0;j<9;j++)
{
if (j == y)
{
this.poss[x.index][j] = 1;
}
else {this.poss[x.index][j] = 0;}
}

this.reduce = function() //performs as many direct deductions as possible.
{
var i = 0;
var j = 0;
var k = 0;
var l = 0;
var a = 0;
var b = 0;
var c = 0;
var d = 0;
var t = true;
while (t)
{
this.index = -1;
t = false;
for (i=0;i<81;i++)
{
k=-2;
for (j=0;j<9;j++)
{
if (k == -2 && this.poss[i][j] == 1)
{
k = j;
} else if (this.poss[i][j] == 1)
{
k = -1;
this.index = i;
}
}
if (k == -2)
{
this.solvable = false;
}
if (k >= 0)
{
for (j=0;j<81;j++)
{
a = j%9;
b = i%9;
c = (j-j%9)/9;
d = (i-i%9)/9;
if (a == b || c == d || ((a-a%3)/3 == (b-b%3)/3 && (c-c%3)/3 == (d-d%3)/3))
{
if (this.poss[j][k] == 1 && j != i)
{
this.poss[j][k] = 0;
t = true;
}
}
}
}
}
}
}
}


function funct()
{
var x = new Array();
var i = 0;
var j = 0
var k = 0;
for (j=1;j<=9;j++)
{
for (k=1;k<=9;k++)
{
x[i] = document.getElementById("" + j + k).value;
i++;
}
}
var guesses = new Array(); 							// The next 20-30 lines of code create an array of possibility arrays.
var vals = new Array();								// The next member of the array is obtained from the previous one by
var q = 0;									// making a guess and then making as many deductions as possible.
guesses[0] = new guessFromInput(x);						// If a contradiction is reached, the algorithm steps back and changes the
guesses[0].reduce();								// previous guess. Likewise if the algorithm runs out of possible guesses, it
vals[0] = 0;									// steps back and changes the guess at the previous step. This continues until
while (q>=0 && (guesses[q].index != -1 || guesses[q].solvable == false))	// a solution is found or it is determined that none exists.
{
if (guesses[q].solvable == false)
{
q--;
vals[q]++;
}
else
{
while (guesses[q].poss[guesses[q].index][vals[q]] != 1 && vals[q] < 9)
{
vals[q]++;
}
if (vals[q] >= 9)
{
q--;
vals[q]++;
}
else {
q++;
guesses[q] = new guessFromGuess(guesses[q-1],vals[q-1]);
guesses[q].reduce();
vals[q] = 0;
}
}
}
if (q < 0)
{
alert("This Puzzle has no solution.");
}
else{
var t = 0;
var l = 0;
i=0;
for (j=1;j<=9;j++)
{
for (k=1;k<=9;k++)
{
t = -1;
for (l=0;l<9;l++)
{
if (guesses[q].poss[i][l] == 1)
{
if (t == -1) {t = l+1;}
else {t = 0}
}
}
document.getElementById("" + j + k).value = t;
i++;
}
}
}
}

function clearfunct()
{
var j = 0;
var k = 0;
for (j=1;j<=9;j++)
{
for (k=1;k<=9;k++)
{
document.getElementById("" + j + k).value = 0;
}
}
}
</script>

<center>
<button type="button" onclick = "funct()">Solve</button> 
<button type="button" onclick = "clearfunct()">Clear</button></center>
<br>
<br>
<center> Enter your puzzle into the fields above and click solve. Blank
fields should be given the value 0. <br>
The solver may take up to a couple of seconds and will alert you if the
puzzle is faulty and has no solution. <br> If it has multiple solutions,
the solver will output a particular one. <br>
Enjoy! </center>






</html>
